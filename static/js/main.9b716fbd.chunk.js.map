{"version":3,"sources":["misc/products.js","stages/start/StartStage.js","misc/lookup.js","stages/card-flicking/Cards.js","stages/card-flicking/CardFlickingStage.js","stages/statistics/StatisticsStage.js","App.js","serviceWorker.js","index.js"],"names":["products","id","title","imageURL","price","category","expirationDate","StartStage","props","className","Button","onClick","onDone","actionFlashEmojiLookup","THROW_ALL","THROW_ALMOST_ALL","THROW_ABOUT_HALF","THROW_SOME_LEFT","EAT","KEEP","trans","r","s","widthSection","document","body","clientWidth","heightSection","clientHeight","Cards","useState","Set","goneX","goneY","useSprings","itemImages","length","i","x","y","scale","rot","Math","random","delay","to","from","springProps","set","action","hideAction","setAction","bind","useDrag","index","args","down","movement","mx","my","direction","distance","velocity","xDir","last","startsWith","add","onFlick","isGoneX","has","window","innerWidth","isGoneY","innerHeight","undefined","config","friction","tension","labelStyles","useMemo","itemExpirationDates","map","right","toFixed","bottom","transform","style","width","height","position","top","left","display","alignItems","justifyContent","color","background","opacity","transition","zIndex","pointerEvents","flexDirection","fontSize","split","day","month","year","date","Date","console","log","diff","round","div","key","interpolate","backgroundImage","backgroundColor","padding","borderRadius","fontFamily","abs","CardFlickingStage","flash","setFlash","flickedStuff","setFlickedStuff","useEffect","animation","animationFillMode","now","wastePercentage","originalProduct","t","wastedMoney","StatisticsStage","fullPrice","reduce","acc","wastedPrice","wastedProducts","data","name","COLORS","fill","floor","cx","cy","innerRadius","outerRadius","startAngle","endAngle","dataKey","_","App","addEventListener","event","preventDefault","passive","stage","setStage","setWastedProducts","wasted","onReset","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"uRAAaA,G,OAAW,CACtB,CACEC,GAAI,YACJC,MAAO,QACPC,SACE,mFACFC,MAAO,IACPC,SAAU,QACVC,eAAgB,cAElB,CACEL,GAAI,eACJC,MAAO,OACPC,SACE,2GACFC,MAAO,KACPC,SAAU,QACVC,eAAgB,cAElB,CACEL,GAAI,QACJC,MAAO,QACPC,SACE,uEACFC,MAAO,IACPC,SAAU,QACVC,eAAgB,cAElB,CACEL,GAAI,eACJC,MAAO,YACPC,SACE,2FACFC,MAAO,KACPC,SAAU,OACVC,eAAgB,cAElB,CACEL,GAAI,gBACJC,MAAO,OACPC,SACE,2FACFC,MAAO,KACPC,SAAU,OACVC,eAAgB,cAElB,CACEL,GAAI,gBACJC,MAAO,SACPC,SACE,uFACFC,MAAO,KACPC,SAAU,QACVC,eAAgB,cAElB,CACEL,GAAI,sBACJC,MAAO,mBACPC,SACE,gGACFC,MAAO,KACPC,SAAU,oBACVC,eAAgB,cAElB,CACEL,GAAI,iBACJC,MAAO,QACPC,SACE,0IACFC,MAAO,KACPC,SAAU,oBACVC,eAAgB,cAElB,CACEL,GAAI,OACJC,MAAO,OACPC,SACE,4EACFC,MAAO,KACPC,SAAU,OACVC,eAAgB,cAElB,CACEL,GAAI,QACJC,MAAO,QACPC,SAAU,gEACVC,MAAO,IACPC,SAAU,QACVC,eAAgB,cAElB,CACEL,GAAI,UACJC,MAAO,SACPC,SACE,6HACFC,MAAO,KACPC,SAAU,eACVC,eAAgB,cAElB,CACEL,GAAI,gBACJC,MAAO,yBACPC,SACE,iFACFC,MAAO,KACPC,SAAU,oBACVC,eAAgB,cAElB,CACEL,GAAI,aACJC,MAAO,cACPC,SACE,iFACFC,MAAO,KACPC,SAAU,eACVC,eAAgB,gB,SC/GPC,G,OAAa,SAAAC,GACxB,OACE,oCACE,yBAAKC,UAAU,cAAf,mDAGA,kBAACC,EAAA,EAAD,CACEC,QAAS,WACPH,EAAMI,WAFV,Y,iDCVOC,G,OAAyB,CACpCC,UAAW,eACXC,iBAAkB,iCAClBC,iBAAkB,iCAClBC,gBAAiB,iCACjBC,IAAK,eACLC,KAAM,iB,yjBCCR,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","file":"static/js/main.9b716fbd.chunk.js","sourcesContent":["export const products = [\n  {\n    id: \"maitorasv\",\n    title: \"Maito\",\n    imageURL:\n      \"https://foodieimages.s3.amazonaws.com/images/entries/320x480/6415712506032_0.png\",\n    price: 0.59,\n    category: \"Dairy\",\n    expirationDate: \"12-11-2019\"\n  },\n  {\n    id: \"frooshakg750\",\n    title: \"Mehu\",\n    imageURL:\n      \"https://www.froosh.com/globalassets/inriver/resources/akg-750ml-juice.png?width=450&height=450&mode=crop\",\n    price: 3.29,\n    category: \"Juice\",\n    expirationDate: \"14-11-2019\"\n  },\n  {\n    id: \"omena\",\n    title: \"Omena\",\n    imageURL:\n      \"https://i5.walmartimages.ca/images/Enlarge/094/514/6000200094514.jpg\",\n    price: 0.54,\n    category: \"Fruit\",\n    expirationDate: \"15-11-2019\"\n  },\n  {\n    id: \"jauheliha400\",\n    title: \"Jauheliha\",\n    imageURL:\n      \"https://www.atria.fi/contentassets/e9a4aec7ef744f33b5407fa39f061b58/4117.jpg?w=555&h=555\",\n    price: 4.15,\n    category: \"Meat\",\n    expirationDate: \"18-11-2019\"\n  },\n  {\n    id: \"kanafilnat480\",\n    title: \"Kana\",\n    imageURL:\n      \"https://www.atria.fi/contentassets/e25865dcc77a4c6b8ef86178e4f063ab/1689.jpg?w=555&h=555\",\n    price: 6.29,\n    category: \"Meat\",\n    expirationDate: \"16-11-2019\"\n  },\n  {\n    id: \"oltermanni450\",\n    title: \"Juusto\",\n    imageURL:\n      \"https://cdn.valio.fi/mediafiles/66568094-ae1a-4de4-83d0-b5674dc5b1a4/400x400-product\",\n    price: 5.29,\n    category: \"Dairy\",\n    expirationDate: \"17-11-2019\"\n  },\n  {\n    id: \"makaronilaatikko700\",\n    title: \"Makaronilaatikko\",\n    imageURL:\n      \"https://www.kokkikartano.fi/app/uploads/2017/05/Lihamakaronilaatikko_700g-0x500-c-default.png\",\n    price: 6.39,\n    category: \"Convenience Foods\",\n    expirationDate: \"17-11-2019\"\n  },\n  {\n    id: \"tuorepizzasaar\",\n    title: \"Pizza\",\n    imageURL:\n      \"https://www.saarioinen.fi/globalassets/89.-kuluttajat-tuotekuvat-integraatiolla/8551.jpg?mode=crop&scale=both&anchor=middlecenter&w=600\",\n    price: 5.59,\n    category: \"Convenience Foods\",\n    expirationDate: \"19-11-2019\"\n  },\n  {\n    id: \"lohi\",\n    title: \"Lohi\",\n    imageURL:\n      \"http://www.leroy.fi/files/cache/eaa84d029ccaecefd46e0ef8e7ab39aa_f317.jpg\",\n    price: 8.99,\n    category: \"Fish\",\n    expirationDate: \"16-11-2019\"\n  },\n  {\n    id: \"kerma\",\n    title: \"Kerma\",\n    imageURL: \"https://public.keskofiles.com/f/k-ruoka/product/6410405142597\",\n    price: 0.89,\n    category: \"Dairy\",\n    expirationDate: \"12-11-2019\"\n  },\n  {\n    id: \"oatlyik\",\n    title: \"iKAFFE\",\n    imageURL:\n      \"https://www.fitnessfirst.fi/media/catalog/product/cache/1/image/x600/e3f29957c4a84f7bf5c1685080c2b7a2/o/a/oatly_ikaffe.png\",\n    price: 2.49,\n    category: \"Oat Products\",\n    expirationDate: \"15-11-2019\"\n  },\n  {\n    id: \"freshsalaatti\",\n    title: \"Kreikkalainen Salaatti\",\n    imageURL:\n      \"https://hetkessa.fi/wp-content/uploads/2019/01/9153-Kreikkalainen-Salaatti.jpg\",\n    price: 3.99,\n    category: \"Convenience Foods\",\n    expirationDate: \"17-11-2019\"\n  },\n  {\n    id: \"nyhtokaura\",\n    title: \"Nyhto Kaura\",\n    imageURL:\n      \"https://goldandgreenfoods.com/app/uploads/2019/03/GG_OB_tomaatti_uusiface7.png\",\n    price: 3.79,\n    category: \"Oat Products\",\n    expirationDate: \"18-11-2019\"\n  }\n];\n","import React from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport \"./StartStage.css\";\n\nexport const StartStage = props => {\n  return (\n    <>\n      <div className=\"intro-text\">\n        It looks like you're wasting a lot of food, foo\n      </div>\n      <Button\n        onClick={() => {\n          props.onDone();\n        }}\n      >\n        Start\n      </Button>\n    </>\n  );\n};\n","export const actionFlashEmojiLookup = {\n  THROW_ALL: \"😱\",\n  THROW_ALMOST_ALL: \"🤦‍♀️\",\n  THROW_ABOUT_HALF: \"🙎‍♀️\",\n  THROW_SOME_LEFT: \"🤷‍♀️\",\n  EAT: \"😋\",\n  KEEP: \"📦\"\n};\n","import React, { useState, useMemo } from \"react\";\nimport { useSprings, animated, to as interpolate } from \"react-spring\";\nimport { useDrag } from \"react-use-gesture\";\nimport \"./Cards.css\";\nimport { actionFlashEmojiLookup } from \"../../misc/lookup\";\n\n// These two are just helpers, they curate spring data, values that are later being interpolated into css\nconst to = i => ({\n  x: 0,\n  y: i * -4,\n  scale: 1,\n  rot: -10 + Math.random() * 20,\n  delay: i * 100\n});\nconst from = i => ({ x: 0, rot: 0, scale: 1.5, y: -1000 });\n// This is being used down there in the view, it interpolates rotation and scale into a css transform\nconst trans = (r, s) =>\n  `perspective(1500px) rotateX(30deg) rotateY(${r /\n    10}deg) rotateZ(${r}deg) scale(${s})`;\n\nconst offcenterDeadzone = 20;\nconst widthSection = (document.body.clientWidth - 20 * 2) / 6;\nconst heightSection = document.body.clientHeight / 4;\n\nexport const Cards = props => {\n  const [goneX] = useState(() => new Set()); // The set flags all the cards that are flicked out\n  const [goneY] = useState(() => new Set()); // The set flags all the cards that are flicked out\n  const [springProps, set] = useSprings(props.itemImages.length, i => ({\n    ...to(i),\n    from: from(i)\n  })); // Create a bunch of springs using the helpers above\n  const [[action, hideAction], setAction] = useState([null, null]);\n\n  // Create a gesture, we're interested in down-state, delta (current-pos - click-pos), direction and velocity\n  const bind = useDrag(\n    ({\n      args: [index],\n      down,\n      movement: [mx, my],\n      distance,\n      direction,\n      velocity,\n      last\n    }) => {\n      const xDir =\n        (action && action.startsWith(\"THROW\")) || direction.xDir < 0 ? -1 : 1; // Direction should either point left or right\n\n      if (down) {\n        if (my < -heightSection) {\n          setAction([\"KEEP\", false]);\n        } else if (mx < -offcenterDeadzone - widthSection * 3) {\n          setAction([\"THROW_ALL\", false]);\n        } else if (mx < -offcenterDeadzone - widthSection * 2) {\n          setAction([\"THROW_ALMOST_ALL\", false]);\n        } else if (mx < -offcenterDeadzone - widthSection) {\n          setAction([\"THROW_ABOUT_HALF\", false]);\n        } else if (mx < -offcenterDeadzone) {\n          setAction([\"THROW_SOME_LEFT\", false]);\n        } else if (mx < -30 && velocity > 0.2) {\n          setAction([\"THROW_ALL\", true]);\n        } else if (mx > 100) {\n          setAction([\"EAT\", false]);\n        } else if (mx > 30 && velocity > 0.2) {\n          setAction([\"EAT\", true]);\n        } else {\n          setAction([null, null]);\n        }\n      } else if (action) {\n        if (action === \"KEEP\") {\n          goneY.add(index);\n        } else {\n          goneX.add(index);\n        }\n        props.onFlick(index, action);\n        setAction([null, null]);\n      }\n\n      set(i => {\n        if (index !== i) return; // We're only interested in changing spring-data for the current spring\n        const isGoneX = goneX.has(index);\n        const x = isGoneX ? (200 + window.innerWidth) * xDir : down ? mx : 0; // When a card is gone it flys out left or right, otherwise goes back to zero\n        const isGoneY = goneY.has(index);\n        const y = isGoneY ? -window.innerHeight : down ? my : 0; // When a card is gone it flys out left or right, otherwise goes back to zero\n        const rot = mx / 100 + (isGoneX ? xDir * 10 * velocity : 0); // How much the card tilts, flicking it harder makes it rotate faster\n        const scale = down ? 1.1 : 1; // Active cards lift up a bit\n        return {\n          x,\n          y,\n          rot,\n          scale,\n          delay: undefined,\n          config: {\n            friction: 50,\n            tension: down ? 800 : isGoneX || isGoneY ? 200 : 500\n          }\n        };\n      });\n    }\n  );\n\n  const labelStyles = useMemo(() => {\n    return props.itemExpirationDates.map(() => ({\n      right: (0.5 + Math.random() * 2).toFixed(1) + \"rem\",\n      bottom: (0.5 + Math.random() * 2).toFixed(1) + \"rem\",\n      transform: \"rotate(\" + (2 - Math.random() * 4).toFixed(1) + \"deg)\"\n    }));\n    // eslint-disable-next-line\n  }, [props.itemExpirationDates.length]);\n\n  // Now we're just mapping the animated values to our view, that's it. Btw, this component only renders once. :-)\n  return (\n    <>\n      <div\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          color: \"white\",\n          background: \"rgba(0,0,0,0.7)\",\n          opacity: action && !hideAction ? 1 : 0,\n          transition: \"0.5s\",\n          zIndex: 1000,\n          pointerEvents: \"none\",\n          flexDirection: \"column\"\n        }}\n      >\n        {action && !hideAction && (\n          <>\n            <div style={{ display: \"flex\", fontSize: \"3rem\" }}>\n              {actionFlashEmojiLookup[action]}\n            </div>\n            <div style={{ display: \"flex\", fontSize: \"1.5rem\" }}>\n              {\n                {\n                  THROW_ALL: \"I threw it all!\",\n                  THROW_ALMOST_ALL: \"I threw almost all of it\",\n                  THROW_ABOUT_HALF: \"Roughly half left\",\n                  THROW_SOME_LEFT: \"There was some left\",\n                  KEEP: \"I'm keeping it\",\n                  EAT: \"I ate it! Yum!\"\n                }[action]\n              }\n            </div>\n          </>\n        )}\n      </div>\n      {springProps.map(({ x, y, rot, scale }, i) => {\n        const [day, month, year] = props.itemExpirationDates[i].split(\"-\");\n        const date = new Date(year, month - 1, day);\n        console.log(+date, props.date);\n        const diff = Math.round((+date - +props.date) / 1000 / 60 / 60 / 24);\n\n        return (\n          <animated.div className=\"card-container\" key={i} style={{ x, y }}>\n            {/* This is the card itself, we're binding our gesture to it (and inject its index so we know which is which) */}\n\n            <animated.div\n              className=\"card\"\n              {...bind(i)}\n              style={{\n                transform: interpolate([rot, scale], trans),\n                backgroundImage: `url(${props.itemImages[i]})`\n              }}\n            >\n              <div\n                style={{\n                  ...labelStyles[i],\n                  position: \"absolute\",\n\n                  backgroundColor: diff > 0 ? \"black\" : \"crimson\",\n                  padding: \"0.5rem\",\n                  borderRadius: \"0.3rem\",\n                  color: \"white\",\n                  fontFamily: \"Impact Label, sans serif\"\n                }}\n              >\n                {diff > 0\n                  ? \"Expires in \" + diff + \" days.\"\n                  : diff === 0\n                  ? \"Expires today\"\n                  : \"Expired \" + Math.abs(diff) + \" days ago.\"}\n              </div>\n            </animated.div>\n          </animated.div>\n        );\n      })}\n    </>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Cards } from \"./Cards\";\nimport { actionFlashEmojiLookup } from \"../../misc/lookup\";\n\nexport const CardFlickingStage = props => {\n  const { products } = props;\n\n  const [flash, setFlash] = useState(null);\n  const [flickedStuff, setFlickedStuff] = useState([]);\n\n  useEffect(() => {\n    if (flickedStuff.length === products.length) {\n      props.onDone(flickedStuff);\n    }\n    // eslint-disable-next-line\n  }, [flickedStuff.length]);\n\n  return (\n    <>\n      {flash && (\n        <div\n          style={{\n            width: \"100%\",\n            height: \"100%\",\n            position: \"absolute\",\n            top: 0,\n            left: 0,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            fontSize: \"5rem\",\n            zIndex: 1000,\n            opacity: 0,\n            pointerEvents: \"none\",\n            animation: \"flash 1s\",\n            animationFillMode: \"forward\"\n          }}\n        >\n          {flash}\n        </div>\n      )}\n      <Cards\n        date={Date.now()}\n        itemImages={products.map(i => i.imageURL)}\n        itemExpirationDates={products.map(i => i.expirationDate)}\n        onFlick={(index, action) => {\n          console.log(index, action);\n          // throwAwayPercentage do something\n          // setCurrentProduct(c => c + 1);\n          setFlash(null);\n          setFlash(actionFlashEmojiLookup[action]);\n          if (action.startsWith(\"THROW\")) {\n            const wastePercentage =\n              {\n                THROW_ALL: 1,\n                THROW_ALMOST_ALL: 0.8,\n                THROW_ABOUT_HALF: 0.5,\n                THROW_SOME_LEFT: 0.2\n              }[action] || 0;\n            const originalProduct = products[index];\n            setFlickedStuff(t => [\n              ...t,\n              {\n                ...originalProduct,\n                wastedMoney: originalProduct.price * wastePercentage\n              }\n            ]);\n          }\n          if (action === \"EAT\" || action === \"KEEP\") {\n            const originalProduct = products[index];\n            setFlickedStuff(t => [\n              ...t,\n              {\n                ...originalProduct,\n                wastedMoney: 0\n              }\n            ]);\n          }\n        }}\n      />\n    </>\n  );\n};\n","import React from \"react\";\nimport { Cell, PieChart, Pie } from \"recharts\";\n\nexport const StatisticsStage = props => {\n  const fullPrice = props.products.reduce((acc, { price }) => acc + price, 0);\n  const wastedPrice = props.wastedProducts.reduce(\n    (acc, { price }) => acc + price,\n    0\n  );\n  const data = [\n    { name: \"full\", price: fullPrice / (fullPrice + wastedPrice) },\n    { name: \"wasted\", price: wastedPrice / (fullPrice + wastedPrice) }\n  ];\n\n  const COLORS = [\"#ffffff\", \"#ff6900\"];\n  return (\n    <>\n      <div\n        style={{\n          height: \"100%\",\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          fontSize: \"2rem\",\n          animation: \"appear 2s\",\n          animationFillMode: \"forward\",\n          color: \"white\",\n          flexDirection: \"column\"\n        }}\n      >\n        <div>\n          {wastedPrice === 0\n            ? \"YOU ROCK!\"\n            : \"💸 You just threw away \" + wastedPrice.toFixed(2) + \" € \"}\n        </div>\n        <PieChart width={200} height={200}>\n          <text x=\"73\" y=\"115\" fill=\"white\">\n            {Math.floor(100 * (fullPrice / (fullPrice + wastedPrice)))} %\n          </text>\n          <Pie\n            color={COLORS}\n            data={data}\n            cx={100}\n            cy={100}\n            innerRadius={80}\n            outerRadius={90}\n            startAngle={180}\n            endAngle={180 + 360}\n            dataKey=\"price\"\n          >\n            {data.map((_, index) => (\n              <Cell key={`cell-${index}`} fill={COLORS[index]} />\n            ))}\n          </Pie>\n        </PieChart>\n      </div>\n    </>\n  );\n};\n","import React, { useState } from \"react\";\nimport \"./App.css\";\nimport { products } from \"./misc/products\";\nimport { StartStage } from \"./stages/start/StartStage\";\nimport { CardFlickingStage } from \"./stages/card-flicking/CardFlickingStage\";\nimport { StatisticsStage } from \"./stages/statistics/StatisticsStage\";\n\nexport const App = () => {\n  // const [currentProduct, setCurrentProduct] = useState(0);\n  document.addEventListener(\n    \"touchmove\",\n    event => {\n      event.preventDefault();\n    },\n    { passive: false }\n  );\n\n  const [stage, setStage] = useState(0);\n  const [wastedProducts, setWastedProducts] = useState(null);\n\n  if (stage === 0) {\n    return (\n      <StartStage\n        onDone={() => {\n          setStage(1);\n        }}\n      />\n    );\n  }\n\n  if (stage === 1) {\n    return (\n      <CardFlickingStage\n        onDone={wasted => {\n          setWastedProducts(wasted);\n          setStage(2);\n        }}\n        products={products}\n      />\n    );\n  }\n\n  if (stage === 2) {\n    return (\n      <StatisticsStage\n        products={products}\n        wastedProducts={wastedProducts}\n        onReset={() => {\n          setStage(0);\n        }}\n      />\n    );\n  }\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { App } from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport MuiThemeProvider from \"@material-ui/core/styles/MuiThemeProvider\";\n\nReactDOM.render(\n  <MuiThemeProvider>\n    <App />\n  </MuiThemeProvider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}